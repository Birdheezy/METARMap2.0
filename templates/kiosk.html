<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>METAR Kiosk</title>
    <link href="{{ url_for('static', filename='css/settings.css') }}" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="kiosk-container">
        <h1 class="kiosk-title">METAR Map</h1>

        <!-- Timer -->
        <div class="kiosk-timer">
            Reset in: <span id="countdown">10:00</span>
        </div>

        <!-- Status Messages -->
        <div id="status-message" class="status-message"></div>
        <div id="airport-count" class="airport-count"></div>
        <div class="weather-status">
            <div class="service-status">
                <span class="status-text">WX Last Updated: {{ weather_last_modified }}</span>
            </div>
        </div>

        <!-- Presets Checkboxes -->
        <div class="checkbox-grid">
            <div class="checkbox-item">
                <input type="checkbox" id="windy" data-type="windy">
                <label for="windy">
                    Windy Airports
                    <div class="condition-airports windy-airports"></div>
                </label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="lightning" data-type="lightning">
                <label for="lightning">
                    Lightning Activity
                    <div class="condition-airports lightning-airports"></div>
                </label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="snow" data-type="snow">
                <label for="snow">
                    Snow Conditions
                    <div class="condition-airports snow-airports"></div>
                </label>
            </div>
            <div class="checkbox-item">
                <input type="checkbox" id="major" data-type="major">
                <label for="major">
                    Major Hubs
                </label>
            </div>
        </div>

        <!-- Add this after the checkbox grid -->
        <div class="selection-preview">
            <h3>Selection Preview</h3>
            <div class="preview-item">
                <span class="preview-label">Windy:</span>
                <span class="preview-airports" id="windy-preview"></span>
            </div>
            <div class="preview-item">
                <span class="preview-label">Lightning:</span>
                <span class="preview-airports" id="lightning-preview"></span>
            </div>
            <div class="preview-item">
                <span class="preview-label">Snow:</span>
                <span class="preview-airports" id="snow-preview"></span>
            </div>
            <div class="preview-item">
                <span class="preview-label">Major Hubs:</span>
                <span class="preview-airports" id="major-preview"></span>
            </div>
            <div class="preview-item">
                <span class="preview-label">Manual Entry:</span>
                <span class="preview-airports" id="manual-preview"></span>
            </div>
            <div class="preview-total">
                <span class="preview-label">Total Airports:</span>
                <span id="total-preview">0</span>
            </div>
        </div>

        <!-- Airport Input Instructions -->
        <div class="input-instructions">
            <h3 class="centered">How to enter airport codes:</h3>
            <ul>
                <li>Enter airport codes in the format "KXXX" (e.g., KDEN, KLAX)</li>
                <li>Separate multiple airports with commas or spaces</li>
                <li>Only airports from the original configuration can be used</li>
            </ul>
        </div>

        <!-- Manual Input with Clear Button -->
        <div class="input-group">
            <input type="text" class="kiosk-input" placeholder="Example: KDEN, KLAX, KORD" id="airport-input">
            <button id="clear-input">Clear</button>
        </div>

        <button id="apply-filters" class="kiosk-action-button">Apply Filters</button>

        <!-- Color Legend -->
        <div class="kiosk-legend">
            <div class="kiosk-legend-item">
                <span class="legend-dot vfr"></span>
                VFR
            </div>
            <div class="kiosk-legend-item">
                <span class="legend-dot mvfr"></span>
                MVFR
            </div>
            <div class="kiosk-legend-item">
                <span class="legend-dot ifr"></span>
                IFR
            </div>
            <div class="kiosk-legend-item">
                <span class="legend-dot lifr"></span>
                LIFR
            </div>
        </div>

        <!-- Return to Normal Button -->
        <button id="reset-button" class="kiosk-action-button">Return Map to Normal</button>
    </div>

    <script>
        // Add color variables
        const VFR_COLOR = '{{ vfr_color }}';
        const MVFR_COLOR = '{{ mvfr_color }}';
        const IFR_COLOR = '{{ ifr_color }}';
        const LIFR_COLOR = '{{ lifr_color }}';
        const MISSING_COLOR = '{{ missing_color }}';
        const WIND_THRESHOLD = {{ wind_threshold }};
    </script>
    <script src="{{ url_for('static', filename='js/kiosk.js') }}"></script>
</body>
</html>
